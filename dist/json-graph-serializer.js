!function(r,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.jsonGraphSerializer=e():r.jsonGraphSerializer=e()}(this,(()=>(()=>{"use strict";var r={d:(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o:(r,e)=>Object.prototype.hasOwnProperty.call(r,e),r:r=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})}},e={};function t(r){return function(r){if(Array.isArray(r))return o(r)}(r)||function(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(r)||n(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(r,e){if(r){if("string"==typeof r)return o(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?o(r,e):void 0}}function o(r,e){(null==e||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function i(r,e,t){return(e=function(r){var e=function(r,e){if("object"!==a(r)||null===r)return r;var t=r[Symbol.toPrimitive];if(void 0!==t){var n=t.call(r,"string");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}(r);return"symbol"===a(e)?e:String(e)}(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function a(r){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},a(r)}function f(r,e){var n=Object.assign({prefix:"~$£€"},e),o=n.prefix,f=n.substitor,l=o+">",u=o+"°",c=o+"þ",s=Symbol(),y=[];try{var v=function(r){return r[s]=1,r},p=0;return JSON.stringify(r,(function(r,e){if(r===l||r===u||r===c){if(null!==e&&e[s])return e;throw new Error("Conflicting serialization prefix: property '"+r+"' exists.")}if(null===e||"object"!==a(e)||e[s])return e;var n,o=e[u];if(o){if(o[s])return i({},l,o);throw new Error("Conflicting serialization prefix: property '"+u+"' exists.")}if(e[u]=(n=p++,o=v(new Number(n))),y.push(e),e instanceof Array)e=v([v(i({},c,v([o,"A"])))].concat(t(e)));else if(e instanceof Map)e=v([v(i({},c,v([o,"M"])))].concat(t(t(e).map((function(r){return v(r)})))));else if(e instanceof Set)e=v([v(i({},c,v([o,"S"])))].concat(t(e)));else if(f){var b=f(e,c);b&&b!==e&&((e=b)[u]=o,e[c]=function(r){if("string"!=typeof r)throw new Error("Type must be a String.");return v(new String(r))}(e[c]||""))}return e}))}finally{y.forEach((function(r){return delete r[u]}))}}function l(r,e){var t=Object.assign({prefix:"~$£€"},e),o=t.prefix,i=t.activator,f=o+">",l=o+"°",u=o+"þ",c=null,s=null,y=[];function v(r,e){var t=null;if(e instanceof Array)if(e.length>0&&null!=e[0]&&void 0!==(t=e[0][u])){switch(e.splice(0,1),t[1]){case"A":break;case"M":e=Object.assign(new Map,{v:e});break;case"S":e=Object.assign(new Set,{v:e});break;default:throw new Error("Expecting typed array to be 'A', 'M' or 'S'.")}y[t[0]]=e}else null===s&&(s=new Set),s.add(e);else if(null!==e){var n=e[l];void 0!==n?(delete e[l],void 0!==(t=e[u])&&(delete e[u],i&&(e=i(e,t))&&(null===c&&(c=new Set),c.add(e))),y[n]=e):(null===s&&(s=new Set),s.add(e))}return e}var p="string"==typeof r?JSON.parse(r,v):v(0,function r(e){if(e)if(e instanceof Array)for(var t=0;t<e.length;++t){var n=e[t];r(n),e[t]=v(0,n)}else if("object"===a(e))for(var o in e){var i=e[o];r(i),e[o]=v(0,i)}return e}(r));function b(r,e){for(var t=e.length,n=0;n<t;++n){var o=e[n];if(o){var i=o[f];void 0!==i&&(e[n]=r[i])}}}for(var d=function(){var r=S[m];if(null===c||!c.has(r))if(r instanceof Array)b(y,r);else if(r instanceof Map)r.v.forEach((function(r){return b(y,r)})),r.v.forEach((function(e){return r.set(e[0],e[1])})),delete r.v;else if(r instanceof Set)b(y,r.v),r.v.forEach((function(e){return r.add(e)})),delete r.v;else for(var e in r){var t=r[e];if(null!==t){var n=t[f];void 0!==n&&(r[e]=y[n])}}},m=0,S=y;m<S.length;m++)d();if(null!==s){var h,g=function(r,e){var t="undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=n(r))){t&&(r=t);var o=0,i=function(){};return{s:i,n:function(){return o>=r.length?{done:!0}:{done:!1,value:r[o++]}},e:function(r){throw r},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,f=!0,l=!1;return{s:function(){t=t.call(r)},n:function(){var r=t.next();return f=r.done,r},e:function(r){l=!0,a=r},f:function(){try{f||null==t.return||t.return()}finally{if(l)throw a}}}}(s);try{for(g.s();!(h=g.n()).done;){var w=h.value;if(w instanceof Array)b(y,w);else for(var j in w){var A=w[j];if(null!==A){var x=A[f];void 0!==x&&(w[j]=y[x])}}}}catch(r){g.e(r)}finally{g.f()}}return p}return r.r(e),r.d(e,{deserialize:()=>l,serialize:()=>f}),e})()));
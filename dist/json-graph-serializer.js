!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.jsonGraphSerializer=r():e.jsonGraphSerializer=r()}(this,function(){return function(e){var r={};function n(t){if(r[t])return r[t].exports;var o=r[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=r,n.d=function(e,r,t){n.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:t})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(r,"a",r),r},n.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},n.p="",n(n.s=0)}([function(e,r,n){"use strict";function t(e){return function(e){if(Array.isArray(e)){for(var r=0,n=new Array(e.length);r<e.length;r++)n[r]=e[r];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function o(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,r){var n=Object.assign({prefix:"~$£€"},r),f=n.prefix,a=n.substitor,u=f+">",c=f+"°",l=f+"þ",s=Symbol(),p=[];try{var y=function(e){return e[s]=1,e},v=0;return JSON.stringify(e,function(e,r){if(e===u||e===c||e===l){if(null!==r&&r[s])return r;throw new Error("Conflicting serialization prefix: property '"+e+"' exists.")}if(null===r||"object"!==i(r)||r[s])return r;var n,f=r[c];if(f){if(f[s])return o({},u,f);throw new Error("Conflicting serialization prefix: property '"+c+"' exists.")}if(r[c]=(n=v++,f=y(new Number(n))),p.push(r),r instanceof Array)r=y([y(o({},l,y([f,"A"])))].concat(t(r)));else if(r instanceof Map)r=y([y(o({},l,y([f,"M"])))].concat(t(t(r).map(function(e){return y(e)}))));else if(r instanceof Set)r=y([y(o({},l,y([f,"S"])))].concat(t(r)));else if(a){var b=a(r,l);b&&b!==r&&((r=b)[c]=f,r[l]=function(e){if("string"!=typeof e)throw new Error("Type must be a String.");return y(new String(e))}(r[l]||""))}return r})}finally{p.forEach(function(e){return delete e[c]})}}function a(e,r){var n=Object.assign({prefix:"~$£€"},r),t=n.prefix,o=n.activator,f=t+">",a=t+"°",u=t+"þ",c=null,l=[];function s(e,r){var n=null;if(r instanceof Array){if(r.length>0&&null!=r[0]&&void 0!==(n=r[0][u])){switch(r.splice(0,1),n[1]){case"A":break;case"M":r=Object.assign(new Map,{v:r});break;case"S":r=Object.assign(new Set,{v:r});break;default:throw new Error("Expecting typed array to be 'A', 'M' or 'S'.")}l[n[0]]=r}}else if(null!==r){var t=r[a];void 0!==t&&(delete r[a],void 0!==(n=r[u])&&(delete r[u],o&&(r=o(r,n))&&(null===c&&(c=new Set),c.add(r))),l[t]=r)}return r}var p="string"==typeof e?JSON.parse(e,s):s(0,function e(r){if(r)if(r instanceof Array)for(var n=0;n<r.length;++n){var t=r[n];e(t),r[n]=s(0,t)}else if("object"===i(r))for(var o in r){var f=r[o];e(f),r[o]=s(0,f)}return r}(e));function y(e,r){for(var n=r.length,t=0;t<n;++t){var o=r[t];if(o){var i=o[f];void 0!==i&&(r[t]=e[i])}}}for(var v=function(){var e=l[b];if(null===c||!c.has(e))if(e instanceof Array)y(l,e);else if(e instanceof Map)e.v.forEach(function(e){return y(l,e)}),e.v.forEach(function(r){return e.set(r[0],r[1])}),delete e.v;else if(e instanceof Set)y(l,e.v),e.v.forEach(function(r){return e.add(r)}),delete e.v;else for(var r in e){var n=e[r];if(null!==n){var t=n[f];void 0!==t&&(e[r]=l[t])}}},b=0;b<l.length;b++)v();return p}n.r(r),n.d(r,"serialize",function(){return f}),n.d(r,"deserialize",function(){return a})}])});